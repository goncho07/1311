# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# PEEPOS - Configuraciรณn para Google Cloud Run
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#
# IMPORTANTE: Este archivo es una plantilla. NO incluir en Git.
# Las credenciales reales se deben configurar en Secret Manager.
#
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Application
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
APP_NAME=Peepos
APP_ENV=production
APP_KEY=base64:GENERATE_WITH_php_artisan_key:generate
APP_DEBUG=false
APP_URL=https://api.peepos.app

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Database - Cloud SQL MySQL 8.0
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
DB_CONNECTION=mysql

# ๐ด CRรTICO: Para Cloud Run, usar Unix Socket (no TCP)
# Formato: /cloudsql/PROJECT_ID:REGION:INSTANCE_NAME
DB_HOST=/cloudsql/tu-proyecto-id:us-central1:peepos-mysql-prod
DB_PORT=3306
DB_DATABASE=peepos_central
DB_USERNAME=peepos_app
DB_PASSWORD=${DB_PASSWORD}  # Inyectado desde Secret Manager
DB_SOCKET=/cloudsql/tu-proyecto-id:us-central1:peepos-mysql-prod

# Conexiรณn Central (misma instancia Cloud SQL)
DB_CENTRAL_HOST=/cloudsql/tu-proyecto-id:us-central1:peepos-mysql-prod
DB_CENTRAL_PORT=3306
DB_CENTRAL_DATABASE=peepos_central
DB_CENTRAL_USERNAME=peepos_app
DB_CENTRAL_PASSWORD=${DB_PASSWORD}

# Optimizaciones para Cloud SQL
DB_COMPRESS=true
MYSQL_ATTR_SSL_CA=

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Cache & Queue - Cloud Memorystore (Redis)
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
CACHE_DRIVER=redis
CACHE_PREFIX=peepos_cache
SESSION_DRIVER=redis
SESSION_LIFETIME=120
QUEUE_CONNECTION=redis

REDIS_CLIENT=phpredis
REDIS_HOST=${REDIS_HOST}  # IP privada de Memorystore
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_CLUSTER=redis
REDIS_PREFIX=peepos_

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Storage - Google Cloud Storage
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
FILESYSTEM_DISK=gcs

# GCS Configuration
GCS_PROJECT_ID=tu-proyecto-id
GCS_KEY_FILE=/secrets/gcs-key.json
GCS_BUCKET=peepos-storage-prod
GCS_PATH_PREFIX=
GCS_STORAGE_API_URI=https://storage.googleapis.com
GCS_VISIBILITY=private

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Logging
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
LOG_CHANNEL=stackdriver
LOG_LEVEL=info
LOG_DEPRECATIONS_CHANNEL=null
LOG_STACK=single

# Cloud Logging
GOOGLE_CLOUD_PROJECT_ID=tu-proyecto-id
GOOGLE_APPLICATION_CREDENTIALS=/secrets/logging-key.json

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Mail - SendGrid
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
MAIL_MAILER=smtp
MAIL_HOST=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USERNAME=apikey
MAIL_PASSWORD=${SENDGRID_API_KEY}
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@peepos.app
MAIL_FROM_NAME="${APP_NAME}"

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# External APIs
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Google Gemini AI
GEMINI_API_KEY=${GEMINI_API_KEY}
GEMINI_MODEL=gemini-2.0-flash-exp

# WhatsApp Business API
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_API_KEY=${WHATSAPP_API_KEY}
WHATSAPP_PHONE_NUMBER_ID=${WHATSAPP_PHONE_NUMBER_ID}

# Google Drive API (para importaciรณn de archivos)
GOOGLE_DRIVE_CLIENT_ID=${GOOGLE_DRIVE_CLIENT_ID}
GOOGLE_DRIVE_CLIENT_SECRET=${GOOGLE_DRIVE_CLIENT_SECRET}
GOOGLE_DRIVE_REDIRECT_URI=https://api.peepos.app/auth/google/callback

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Security & Authentication
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
SANCTUM_STATEFUL_DOMAINS=app.peepos.app,localhost:3000
SESSION_DOMAIN=.peepos.app
SESSION_SECURE_COOKIE=true
SESSION_SAME_SITE=lax

# JWT (si se usa)
JWT_SECRET=${JWT_SECRET}
JWT_TTL=480  # 8 horas

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Performance
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
OCTANE_SERVER=roadrunner
OCTANE_HTTPS=true

# Optimizaciones
QUEUE_FAILED_DRIVER=database
TELESCOPE_ENABLED=false
DEBUGBAR_ENABLED=false

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Monitoring - Google Cloud Monitoring
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
GOOGLE_CLOUD_MONITORING_ENABLED=true
GOOGLE_CLOUD_TRACE_ENABLED=true
GOOGLE_CLOUD_ERROR_REPORTING_ENABLED=true

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Application Settings
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
TIMEZONE=America/Lima
LOCALE=es
FALLBACK_LOCALE=es

# Tamaรฑos de upload
MAX_UPLOAD_SIZE=10240  # 10MB en KB
MAX_IMPORT_ROWS=5000

# Rate Limiting
THROTTLE_LIMIT=60
THROTTLE_DECAY_MINUTES=1

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Broadcasting (si se usa)
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
BROADCAST_DRIVER=pusher
PUSHER_APP_ID=${PUSHER_APP_ID}
PUSHER_APP_KEY=${PUSHER_APP_KEY}
PUSHER_APP_SECRET=${PUSHER_APP_SECRET}
PUSHER_APP_CLUSTER=us2

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# CORS
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
CORS_ALLOWED_ORIGINS=https://app.peepos.app,https://peepos.app
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-Tenant-Code
CORS_EXPOSED_HEADERS=X-Total-Count,X-Page,X-Per-Page
CORS_MAX_AGE=3600
CORS_SUPPORTS_CREDENTIALS=true
